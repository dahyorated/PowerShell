{"tasks":[{"environment":{},"displayName":"ACR Login","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"containerRegistry":"e9769bed-ff21-4e8c-b594-85918158cea7","repository":"","command":"login","Dockerfile":"**/Dockerfile","buildContext":"**","tags":"$(Build.BuildId)","arguments":"","addPipelineData":"true"},"task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Container Build","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"containerRegistry":"e9769bed-ff21-4e8c-b594-85918158cea7","repository":"$(serviceName)","command":"build","Dockerfile":"**/Dockerfile","buildContext":"**","tags":"$(serviceName)","arguments":"--build-arg PAT=$(PAT)","addPipelineData":"true"},"task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Container Push","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"containerRegistry":"e9769bed-ff21-4e8c-b594-85918158cea7","repository":"$(serviceName)","command":"push","Dockerfile":"**/Dockerfile","buildContext":"**","tags":"$(serviceName)","arguments":"","addPipelineData":"true"},"task":{"id":"e28912f1-0114-4464-802a-a3a35437fd16","versionSpec":"2.*","definitionType":"task"}}],"runsOn":["Agent"],"revision":3,"createdBy":{"displayName":"Brian Kaddour","id":"c52a9bca-89c0-6a9a-8124-435fcd32500a","uniqueName":"Brian.Kaddour@ey.com"},"createdOn":"2020-01-26T17:21:05.843Z","modifiedBy":{"displayName":"Brian Kaddour","id":"c52a9bca-89c0-6a9a-8124-435fcd32500a","uniqueName":"Brian.Kaddour@ey.com"},"modifiedOn":"2020-02-03T19:57:03.407Z","comment":"Updated to include default PAT","id":"b30d251d-3a58-49ae-9f3e-80005ea46616","name":"Task group: Build and Deploy Containers","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M163_20200124.1/_content/icon-meta-task.png","friendlyName":"Task group: Build and Deploy Containers","description":"Build and deploys containers to ACR using Docker, requires PAT and connection to ACR","category":"Build","definitionType":"metaTask","author":"Brian Kaddour","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"PAT","label":"PAT","defaultValue":"and6pr6ao4nyz5w7ssmqgv2xad4xtsmwlvukwhjj22rxkcjvlosa","required":true,"type":"string","helpMarkDown":"ACR PAT Token","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"serviceName","label":"serviceName","defaultValue":"","required":true,"type":"string","helpMarkDown":"Name of the repository.","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: Task group: Build and Deploy Containers $(PAT)","preJobExecution":{},"execution":{},"postJobExecution":{}}