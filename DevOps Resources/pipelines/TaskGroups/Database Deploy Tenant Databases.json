{"tasks":[{"environment":{},"displayName":"Task group: Load DevOps Scripts","alwaysRun":true,"continueOnError":true,"condition":"succeededOrFailed()","enabled":true,"timeoutInMinutes":0,"inputs":{"library.debug":""},"task":{"id":"7439f6dd-01c4-4f7a-925a-5040ecc48aa8","versionSpec":"1.*","definitionType":"metaTask"}},{"environment":{},"displayName":"Extract files for $(dbName)","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"archiveFilePatterns":"$(System.DefaultWorkingDirectory)/$(dbNugetPackage)","destinationFolder":"$(System.DefaultWorkingDirectory)/BuildOutput","cleanDestinationFolder":"true"},"task":{"id":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","versionSpec":"1.*","definitionType":"task"}},{"environment":{},"displayName":"Azure PowerShell script: FilePath","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"ConnectedServiceNameARM":"$(serviceConnection)","ScriptType":"FilePath","ScriptPath":"$(Agent.ToolsDirectory)/scripts/Update-ReadyRollMigrations.ps1","Inline":"# You can write your azure powershell scripts inline here. \n# You can also pass predefined and custom variables to this script using arguments","ScriptArguments":"-MigrationScript \"$(System.DefaultWorkingDirectory)/BuildOutput/db/project/bin/Debug/$(dbMigrationScript)\" -ServiceName \"$(serviceName)\" -AuthService \"$(AuthService)\" -ClientService \"$(ClientService)\" -ServiceID \"$(ServiceID)\" -ServiceAuthSecret \"$(ServiceAuthSecret)\"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"LatestVersion","CustomTargetAzurePs":"","pwsh":"false","workingDirectory":""},"task":{"id":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","versionSpec":"4.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":3,"createdBy":{"displayName":"Brad Friedlander","id":"23725266-5bf7-603d-b232-59edf9d07071","uniqueName":"Brad.Friedlander@ey.com"},"createdOn":"2020-06-08T18:31:39.937Z","modifiedBy":{"displayName":"Brad Friedlander","id":"23725266-5bf7-603d-b232-59edf9d07071","uniqueName":"Brad.Friedlander@ey.com"},"modifiedOn":"2020-06-09T12:16:18.297Z","comment":"Added description for serviceName","id":"efac2b8f-1f37-4ee7-bde4-9d4646d978ff","name":"Database Deploy Tenant Databases","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M170_20200604.5/_content/icon-meta-task.png","friendlyName":"Database Deploy Tenant Databases","description":"This task group is used to deploy a tenant databases by applying a migrations script to each instance of the tenant database.","category":"Deploy","definitionType":"metaTask","author":"Brad Friedlander","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"AuthService","label":"AuthService","defaultValue":"$(AuthService)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"ClientService","label":"ClientService","defaultValue":"$(ClientService)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"dbMigrationScript","label":"dbMigrationScript","defaultValue":"$(dbMigrationScript)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"dbNugetPackage","label":"dbNugetPackage","defaultValue":"$(dbNugetPackage)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"ServiceAuthSecret","label":"ServiceAuthSecret","defaultValue":"$(ServiceAuthSecret)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{"EndpointFilterRule":"ScopeLevel != AzureMLWorkspace"},"name":"serviceConnection","label":"serviceConnection","defaultValue":"$(serviceConnection)","required":true,"type":"connectedService:AzureRM","helpMarkDown":"Azure Resource Manager subscription to configure before running PowerShell","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"ServiceID","label":"ServiceID","defaultValue":"$(ServiceID)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"serviceName","label":"serviceName","defaultValue":"$(serviceName)","required":true,"type":"string","helpMarkDown":"This is the name of the tenant service.","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: Database Deploy Tenant Databases $(AuthService)","preJobExecution":{},"execution":{},"postJobExecution":{}}